<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Example on calculating the size :: Advanced Deployment of AAP 2.5</title>
    <link rel="prev" href="section4.html">
    <link rel="next" href="section6.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Advanced Deployment of AAP 2.5</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/advanced-deployment-aap25/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="advanced-deployment-aap25" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Advanced Deployment of AAP 2.5</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Advanced Deployment of Ansible Automation Platform 2.5</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section1.html">Automation Mesh</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section2.html">Automation Mesh Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section3.html">Automation Mesh Hands-on LAB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section4.html">Calculate the Sizing requirement for RPM and Containerized Installation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="section5.html">Example on calculating the size</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section6.html">section6.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section7.html">Troubleshooting Ansible Automation Platform Installation issue.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section8.html">section8.adoc</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Advanced Deployment of AAP 2.5</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Advanced Deployment of AAP 2.5</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Advanced Deployment of AAP 2.5</a></li>
    <li><a href="index.html">Advanced Deployment of Ansible Automation Platform 2.5</a></li>
    <li><a href="section5.html">Example on calculating the size</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Example on calculating the size</h1>
<div class="paragraph">
<p>From the previous section you must have figured out the workload capacity that you want to support, you must plan your deployment based on the requirements of the workload. To help you with your deployment, review the following planning exercise.</p>
</div>
<div class="paragraph">
<p>For this example, the cluster must support the following capacity:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>500 managed hosts</p>
</li>
<li>
<p>1,000 tasks per hour per host or 16 tasks per minute per host</p>
</li>
<li>
<p>10 concurrent jobs</p>
</li>
<li>
<p>Forks set to 5 on playbooks. This is the default.</p>
</li>
<li>
<p>Average event size is 1 Mb</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The virtual machines have 4 CPU and 16 GB RAM, and disks that have 3000 IOPs.</p>
</div>
<div class="paragraph">
<p><strong>Execution Capacity calculation</strong></p>
</div>
<div class="paragraph">
<p>Execution Capacity = (Number of jobs * forks value) + (number of jobs * 1 base task impact of a job)</p>
</div>
<div class="paragraph">
<p>You calculate this by using the following equation: (10 jobs * 5 forks) + (10 jobs * 1 base task impact of a job) = 60 execution capacity</p>
</div>
<div class="paragraph">
<p><strong>Control Capacity</strong></p>
</div>
<div class="paragraph">
<p>Total tasks/min = 500 Managed hosts * 16 tasks per minute
                         = 8000 tasks/ minute</p>
</div>
<div class="paragraph">
<p>The above also means that 8000 events will be generated every minute.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Note: You must run the job to see exactly how many events it produces, because this is dependent on the specific task and verbosity. For example, a debug task printing “Hello World” produces 6 job events with the verbosity of 1 on one host. With a verbosity of 3, it produces 34 job events on one host. Therefore, you must estimate that the task produces at least 6 events and rest depends on the number of jobs and verbosity on which you are running it which varies from organization to organization.</pre>
</div>
</div>
<div class="paragraph">
<p>Lets assume that there are 6 events generated per task and there are <code>8000/60 tasks/second = 133 tasks per second</code></p>
</div>
<div class="paragraph">
<p>Now from the above example each event is of 1 mb in size.</p>
</div>
<div class="paragraph">
<p>Lets estimate the event:</p>
</div>
<div class="paragraph">
<p>Number of tasks/sec * Events per tasks = events per second.
133 * 6 = 798 events per second and each event is of 1 mb so 798 mb per second for logs / event data.</p>
</div>
<div class="paragraph">
<p>Your control node must be able to process around 789 events of data per second and it should have Execution capacity of 60.</p>
</div>
<div class="paragraph">
<p>Now considering the reservation and virtual machine we have deployed we get around 140 forks.</p>
</div>
<div class="paragraph">
<p>Number of Execution Nodes = Required Forks / Forks per Node</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"> 60 / 140  which is less than 1. So minimum 1 node will be needed and 2 nodes to implement a fail-safe mechanism.</code></pre>
</div>
</div>
<div class="paragraph">
<p>So for the above:</p>
</div>
<div class="paragraph">
<p>You need to deploy 1 execution node, 1 control node, 1 database node and 1 Unified UI node (mandatory for AAP 2.5) of 4 CPU at 2.5Ghz, 16 GB RAM, and disks that have about 3000 IOPs to handle the Infrastructure for the below requirement:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>500 managed hosts</p>
</li>
<li>
<p>1,000 tasks per hour per host or 16 tasks per minute per host</p>
</li>
<li>
<p>10 concurrent jobs</p>
</li>
<li>
<p>Forks set to 5 on playbooks. This is the default.</p>
</li>
<li>
<p>Average event size is 1 Mb</p>
<div class="literalblock">
<div class="content">
<pre>Note:
The above is true for RPM and Containerized environment.</pre>
</div>
</div>
</li>
</ul>
</div>
<nav class="pagination">
  <span class="prev"><a href="section4.html">Calculate the Sizing requirement for RPM and Containerized Installation</a></span>
  <span class="next"><a href="section6.html">section6.adoc</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
